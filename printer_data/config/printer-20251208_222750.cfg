[include .dynamicmacros.cfg]
# [heater# This file contains common pin mappings for the BIGTREETECH Manta M8P V2.0
# To use this config, the firmware should be compiled for the
# STM32H723 with a "128KiB bootloader" "25 MHz crystal"
# and "USB (on PA11/PA12)", "CAN bus (on PD0/PD1)" or Serial (on USART1 PA10/PA9).

# See docs/Config_Reference.md for a description of parameters.

########################################################################
#   GLOBAL VARIABLES
########################################################################
### 

[delayed_gcode boot_macro]
initial_duration: 1.0
gcode:
  M118 [Welcome: boot_macro]
  CLEAR_PAUSE
  GLOBALS_V

  {% set svv = printer.save_variables.variables %}
  SET_GCODE_VARIABLE  MACRO=GLOBALS_V VARIABLE=extruder_parked  VALUE={svv.extruder_parked} 

  SET_GCODE_VARIABLE  MACRO=GLOBALS_V VARIABLE=tap_mode  VALUE={svv.tap_mode} 
  SET_GCODE_VARIABLE  MACRO=GLOBALS_V VARIABLE=eddy_mode  VALUE={svv.eddy_mode} 
  SET_GCODE_VARIABLE  MACRO=GLOBALS_V VARIABLE=carto_mode  VALUE={svv.carto_mode} 
  
[gcode_macro GLOBALS_V]
variable_extruder_parked : 0
variable_z_pos: -10
# variable_hotend_type : "V6"
variable_hotend_type : "revo"
variable_tap_mode : 0
variable_eddy_mode : 0
variable_carto_mode : 0

gcode:
  M118 globals defined
  M118   default extruder_parked = {extruder_parked}
  M118   default z_pos = {z_pos}
  M118   default tap_mode = {tap_mode}
  M118   default eddy_mode = {eddy_mode}
  M118   default carto_mode = {carto_mode}


# [gcode_macro SET_GLOBAL]
# gcode:
#   M118 macro SET_GLOBAL  params.VALUE = { params.VALUE}
#   SET_GCODE_VARIABLE MACRO=GLOBALS_V VARIABLE=z_pos VALUE={ params.VALUE|float }
 
[save_variables]
filename: ../printer_data/config/variables.cfg
# filename: ~/printer_data/config/firstlayer_vars.cfg
# filename: ~/printer_data/config/firstlayer_vars.cfg

#   Required - provide a filename that would be used to save the
#   variables to disk e.g. ~/variables.cfg


[include mainsail.cfg]
[include moonraker_obico_macros.cfg]
###! [include stealthburner_leds.cfg]

[include homing.cfg]     # does not seems to be used if used as dynamic
[include macros.cfg]
[include speed.cfg]
[include pause.cfg]
# [include dynamic.cfg]

# [include tmc2209.cfg]                        # x/Y/Z axes tmc2209 configu
[include tmc5160.cfg]                          # x/Y/Z axes tmc5160 configuration

##--------------------------
##  select probing mode
##--------------------------
# {% if  printer["gcode_macro GLOBALS_V"].tap_mode == 1 %}
#   ##  use TAP only for probing
# [include tap_probe.cfg]
# {% elif  printer["gcode_macro GLOBALS_V"].eddy_mode == 1 %}
#   ## use Eddy for probing and eddy for bedmesh
[include eddy_config.cfg]  
# {% elif  printer["gcode_macro GLOBALS_V"].carto_mode == 1 %}
#   ## use Cartograpfer for probing and eddy for bedmesh
# [include carto_mesh.cfg]
# {% endif %}
# ##--------------------------

###  [include shell_command.cfg]
[include autotune.cfg]
[include autospeed.cfg]

# First layer optomisation
[include FirstLayer.cfg]

[force_move]
enable_force_move: True

#####################################################################
#   UUID Setting
#####################################################################

[mcu]
#canbus_uuid:
#   If using a device connected to a CAN bus then this sets the unique
#   chip identifier to connect to. This value must be provided when using
#   CAN bus for communication.
#   ~/klippy-env/bin/python ~/klipper/scripts/canbus_query.py can0
#   Found canbus_uuid=b2e403d392fe, Application: Klipper
#   https://gist.github.com/fredrikasberg/c14f08eb8617bf8981f77dbc01b00602
canbus_uuid: b2e403d392fe  # Detected UUID: b2e403d392fe, Application: Klipper

#canbus_interface:
#   If using a device connected to a CAN bus then this sets the CAN
#   network interface to use. The default is 'can0'.
canbus_interface: can0

#restart_method:
#   This controls the mechanism the host will use to reset the
#   micro-controller. The choices are 'arduino', 'cheetah', 'rpi_usb',
#   and 'command'. The 'arduino' method (toggle DTR) is common on
#   Arduino boards and clones. The 'cheetah' method is a special
#   method needed for some Fysetc Cheetah boards. The 'rpi_usb' method
#   is useful on Raspberry Pi boards with micro-controllers powered
#   over USB - it briefly disables power to all USB ports to
#   accomplish a micro-controller reset. The 'command' method involves
#   sending a Klipper command to the micro-controller so that it can
#   reset itself. The default is 'arduino' if the micro-controller
#   communicates over a serial port, 'command' otherwise.


[mcu EBBCan]
##serial: /dev/serial/by-id/usb-Klipper_Klipper_firmware_12345-if00
canbus_uuid: 4cb54f84a8fd       #  Detected UUID: c76167775bb3, Application: Klipper EBB36
# canbus_uuid: 9567318eb8a2     # Detected UUID: 9567318eb8a2, Application: Klipper  EBB2209 !
canbus_interface: can0


#####################################################################
#  Voron R2.4 350x350
#####################################################################
[printer]
kinematics: corexy

##  speed test with G0 X300 Y300 F9000 is ok     
##  F9000 => 9000/60=150 mm/s. 
max_velocity: 1000    # 967  according to auto_speed  		                      
max_accel: 4500       # 78350 according to auto_speed  			
max_z_velocity: 25 			
max_z_accel: 350
square_corner_velocity: 5.0

[heater_bed]
heater_pin: PA1
sensor_pin: PB1 # THB 
sensor_type: ATC Semitec 104GT-2
# control: PID
min_temp: 0
max_temp: 130

##------------------------------------------------
##  CONTROLER FAN
##------------------------------------------------
##  Controller cooling fan (one may define any number of sections with a "controller_fan" prefix). 
##  A "controller fan" is a fan that will be enabled whenever its associated heater or its associated stepper driver is active. 
##  The fan will stop whenever an idle_timeout is reached to ensure no overheating will occur after deactivating a watched component.
##  See the "fan" section for a description of the above parameters.
##  https://www.klipper3d.org/Config_Reference.html?h=fan#fan_generic

[controller_fan my_controller_fan1]
pin: PF9
#max_power:
#shutdown_speed:
#cycle_time:
#hardware_pwm:
#kick_start_time:
#off_below:
#tachometer_pin:
#tachometer_ppr:
#tachometer_poll_interval:
#enable_pin:

fan_speed: 1.0
#   The fan speed (expressed as a value from 0.0 to 1.0) that the fan
#   will be set to when a heater or stepper driver is active.
#   The default is 1.0
idle_timeout: 30
#   The amount of time (in seconds) after a stepper driver or heater
#   was active and the fan should be kept running. The default
#   is 30 seconds.
#idle_speed:
#   The fan speed (expressed as a value from 0.0 to 1.0) that the fan
#   will be set to when a heater or stepper driver was active and
#   before the idle_timeout is reached. The default is fan_speed.
#heater:

stepper: stepper_x, stepper_y, stepper_z, stepper_z1, stepper_z2, stepper_z3
#   Name of the config section defining the heater/stepper that this fan
#   is associated with. If a comma separated list of heater/stepper names
#   is provided here, then the fan will be enabled when any of the given
#   heaters/steppers are enabled. The default heater is "extruder", the
#   default stepper is all of them.
##------------------------------------------------

[controller_fan my_controller_fan2]
pin: PF6
fan_speed: 1.0
idle_timeout: 30
stepper: stepper_x, stepper_y, stepper_z, stepper_z1, stepper_z2, stepper_z3

[shaketune]  
## https://github.com/Frix-x/klippain-shaketune
## https://github.com/Frix-x/klippain-shaketune/blob/main/docs/README.md
##
# result_folder: ~/printer_data/config/ShakeTune_results
#    The folder where the results will be stored. It will be created if it doesn't exist.
# number_of_results_to_keep: 3
#    The number of results to keep in the result_folder. The oldest results will
#    be automatically deleted after each runs.
# keep_raw_csv: False
#    If True, the raw CSV files will be kept in the result_folder alongside the
#    PNG graphs. If False, they will be deleted and only the graphs will be kept.
# show_macros_in_webui: True
#    Mainsail and Fluidd doesn't create buttons for "system" macros that are not in the
#    printer.cfg file. If you want to see the macros in the webui, set this to True.
# timeout: 300
#    The maximum time in seconds to let Shake&Tune process the CSV files and generate the graphs.

##------------------------------------------------
#####################################################################
##  EBB-sb-rp2040-canbus-v1.0.
#####################################################################
#[sample-bigtreetech-ebb-sb-rp2040-canbus-v1.0.cfg]

# This file contains common pin mappings for the BIGTREETECH EBBCan
# Canbus board. To use this config, the firmware should be compiled for the
# RP2040 with "USB" or "CAN bus (on gpio4/gpio5)".
# The "EBB Can" micro-controller will be used to control the components on the nozzle.

# See docs/Config_Reference.md for a description of parameters.

### For ENN2209
# [temperature_sensor EBB_NTC]
# sensor_type: Generic 3950
# sensor_pin: EBBCan:gpio28    

[adxl345]
### EBB209 config
# cs_pin: EBBCan:gpio1
# spi_software_sclk_pin: EBBCan:gpio2
# spi_software_mosi_pin: EBBCan:gpio0
# spi_software_miso_pin: EBBCan:gpio3
# #axes_map: x,y,x     # commented out for Shake Tune AXES_MAP_CALIBRATION

### EBB36 config
cs_pin: EBBCan:PB12
spi_software_sclk_pin: EBBCan:PB10
spi_software_mosi_pin: EBBCan:PB11
spi_software_miso_pin: EBBCan:PB2
axes_map: -x,-y,-z  ### To be checked


[resonance_tester]
probe_points: 175, 175, 20
accel_chip: adxl345

[extruder]
###  EBB2209 config
# step_pin: EBBCan:gpio18
# dir_pin:  EBBCan:gpio19
# enable_pin: !EBBCan:gpio17
# microsteps: 16
# rotation_distance: 4.594   # 4.417 => subsequent_mark_distance = 18.mm  (initial_mark_distance 70 - G1 E50 F60)
# nozzle_diameter: 0.400
# filament_diameter: 1.750
# heater_pin: EBBCan:gpio7

### EBB36 config
step_pin: EBBCan:PD0
dir_pin: !EBBCan:PD1
enable_pin: !EBBCan:PD2
heater_pin: EBBCan: PB13
sensor_pin: EBBCan: PA3
sensor_type: ATC Semitec 104NT-4-R025H42G
# control: PID
min_temp: 150
max_temp: 300

### To be checked
# max_extrude_only_distance=101
microsteps: 16
#  rotation_distance: 4.594   # 4.417 => subsequent_mark_distance = 18.mm  (initial_mark_distance 70 - G1 E50 F60)  ## STEALTHBURNER extruder
rotation_distance: 3.433   ## H2V2S extruder, mesuré 3.5222418  
nozzle_diameter: 0.400
filament_diameter: 1.750

### To be checked
# [temperature_sensor EBBCan]
# sensor_type: temperature_mcu
# sensor_mcu: EBBCan
# min_temp: 0
# max_temp: 100

#max_extrude_cross_section:
#   Maximum area (in mm^2) of an extrusion cross section (eg,
#   extrusion width multiplied by layer height). This setting prevents
#   excessive amounts of extrusion during relatively small XY moves.
#   If a move requests an extrusion rate that would exceed this value
#   it will cause an error to be returned. The default is: 4.0 * nozzle_diameter^2

# {% if hotend_type = "revo" %}
sensor_type: ATC Semitec 104NT-4-R025H42G
# sensor_pin: EBBCan:gpio27    # EBB2209 config TH0
sensor_pin: EBBCan:PA3 # EBB36 config TH0    
# {% endif %}

# {% if hotend_type = "V6" %}
# sensor_type: MAX31865
# sensor_pin: EBBCan:gpio9
# spi_software_sclk_pin: EBBCan:gpio10
# spi_software_mosi_pin: EBBCan:gpio8    # not connected
# spi_software_miso_pin: EBBCan:gpio11   # not connected
# rtd_nominal_r: 100
# rtd_reference_r: 430
# rtd_num_of_wires: 2
# {% endif %}

#control: pid
min_temp: 0
max_temp: 350
min_extrude_temp = 180   # 0 for testing without hotend, 180 oterwise 

[tmc2209 extruder]
# uart_pin: EBBCan:gpio20   ### EBB2209 config
 uart_pin: EBBCan:PA15   ### EBB36 config

run_current: 0.650
stealthchop_threshold: 999999
interpolate: true


[fan]      hotend_fan
# pin: GPIO14  # EBB2209 config
pin: EBBCan:PA1 # EBB36 config
off_below: 0.10

[heater_fan extruder_fan]
# pin: EBBCan:gpio13 # EBB2209 config
pin: EBBCan:PA0  # EBB36 confif
max_power: 1.0
heater: extruder
heater_temp: 50.0
fan_speed:1.0

#[fan_generic 4W_FAN0]  # EBB2209 config
#pin: EBBCan:gpio15 
#pin: {4W_FAN0_pin} 
#tachometer_pin: EBBCan:gpio12
#tachometer_ppr: 1

#[neopixel hotend_rgb]   ## Defined in tealthburner_leds.cfg
#pin: EBBCan:gpio16

#[bltouch]
#sensor_pin: ^EBBCan:gpio21
#control_pin: EBBCan:gpio22

#[heater_fan exhaust_fan]
[fan_generic exhaust_fan]
##	Exhaust fan - CNC_FAN3
## https://docs.vorondesign.com/community/howto/alchemyEngine/chamber_temperature_exhaust_fan.html
## https://github.com/VoronDesign/Voron-2/blob/Voron2.4/firmware/klipper_configurations/M8P/Voron2_M8P-v2.0_config.cfg
pin: PF8
#max_power: 1.0
#shutdown_speed: 0.0
#kick_start_time: 5.0
#heater: heater_bed
#heater_temp: 60
#fan_speed: 1.0

# [probe]   ## with TAP defined if tap_probe.cfg


# --- Voron Tap as Z endstop only ---
# --- Macro to home Z with Tap-like behavior ---
[gcode_macro HOME_Z_WITH_TAP]
gcode:
    # --------------------
    # according to copilot
    # --------------------
    # {% set PROBE_TEMP = 150 %}
    # M104 S{PROBE_TEMP}       ; Heat nozzle to probe temp
    # M109 S{PROBE_TEMP}       ; Wait for temp
    # G91                      ; Relative mode
    # G1 Z10 F600              ; Lift Z
    # G90                      ; Absolute mode
    # G28 Z                    ; Home Z using Tap endstop
    # # Simulate Tap's retract and sample behavior
    # G91
    # G1 Z3 F600
    # G90
    # --------------------
    
    {% set PROBE_TEMP = 150 %}
    {% set MAX_TEMP = PROBE_TEMP + 5 %}
    {% set ACTUAL_TEMP = printer.extruder.temperature %}
    {% set TARGET_TEMP = printer.extruder.target %}

    {% if TARGET_TEMP > PROBE_TEMP %}
        { action_respond_info('Extruder temperature target of %.1fC is too high, lowering to %.1fC' % (TARGET_TEMP, PROBE_TEMP)) }
        M109 S{ PROBE_TEMP }
    {% else %}
        # Temperature target is already low enough, but nozzle may still be too hot.
        {% if ACTUAL_TEMP > MAX_TEMP %}
            { action_respond_info('Extruder temperature %.1fC is still too high, waiting until below %.1fC' % (ACTUAL_TEMP, MAX_TEMP)) }
            TEMPERATURE_WAIT SENSOR=extruder MAXIMUM={ MAX_TEMP }
        {% endif %}
    {% endif %}
    



[filament_switch_sensor switch_sensor]
switch_pin: ^PF0          #  EBBCan:gpio24
#  EBBCan:gpio24  : end-stop port 
#  La broche sur laquelle l'interrupteur est connecté.
#  Ce paramètre doit être fourni.
    
pause_on_runout: True
#  Lorsque défini sur True, une PAUSE sera exécutée immédiatement après qu'un runout
#  soit détecté. Notez que si pause_on_runout est False et que le runout_gcode est omis,
#  la détection du runout est désactivée. Par défaut, est True.

runout_gcode: 
#  Une liste de commandes G-Code à exécuter après la détection d'une fin de filament.
#  Voir docs/Command_Templates.md pour le format G-Code. Si pause_on_runout est
#  réglé sur True, ce G-code sera exécuté après la fin de la PAUSE. Par défaut, aucune
#    commande G-Code n'est exécutée.
    RESPOND MSG="Filament Switch runnout detected" COLOR="success"
    CHANGE_FILAMENT

insert_gcode:
#  Une liste de commandes G-Code à exécuter après qu'une insertion de filament soit détectée.
#  Voir docs/Command_Templates.md pour le format G-Code. La valeur par défaut est de
#  n'exécuter aucune commande G-Code, ce qui désactive la détection de l'insertion.
    RESPOND MSG="Filament Switch inserted" COLOR="success"
    
event_delay:  3.0
#    La durée minimale en secondes à attendre entre les événements.
#    Des événements déclenchés durant cette période seront silencieusement ignorés.
#    La valeur par défaut est de 3 secondes.
pause_delay: 0.5
#    Le délai, en secondes, entre l'envoi de la commande de pause et l'exécution du runout_gcode.
#    Il peut être utile d'augmenter ce délai si OctoPrint présente un comportement étrange lors de
#    la pause. La valeur par défaut est 0.5 secondes.


[filament_motion_sensor encoder_sensor]
# switch_pin: !EBBCan:gpio24  # end-stop port
switch_pin: ^PC15    # ^EBBCan:gpio6      # IND port

detection_length: 10  # 2.88 This can be adjusted to your desired level of sensitivity. 10 is a recommended value to prevent flow dropoff false triggers.
extruder: extruder
pause_on_runout: True # This can be set to false to debug false positives putting the sensor in "monitor mode". The printer will not pause but it will run the runout_gcode below.
event_delay: 3.0
pause_delay: 2  # 0.5
runout_gcode:
    RESPOND MSG="Filament encoder runnout detected"
    CHECK_FILAMENT
    
insert_gcode:
    RESPOND MSG="Filament encoder detected"


[delayed_gcode DISABLEFILAMENTSENSOR] ; This will disable the SFS 1 second after klipper starts
initial_duration: 1
gcode:
    SFS_DISABLE
    # SET_FILAMENT_SENSOR SENSOR=encoder_sensor ENABLE=0 

#####################################################################
#   BED MESH
#   https://www.klipper3d.org/Bed_Mesh.html#:~:text=Rectangular%20Beds%C2%B6This%20example%20assumes%20a%20printer
#####################################################################
# [bed_mesh]  
# ## error Communication timeout during homing, especially if probe_count > 5
# ## https://mellow.klipper.cn/en/docs/DebugDoc/faq/hometimeout/
# ## TRSYNC_TIMEOU from 0.025 to 0.050 or even 0.060 in /home/pi/klipper/klippy/mcu.py
# ## file is then marked as dirty ! 
# speed: 50
# horizontal_move_z: 2
# mesh_min: 0, 10     # 10, 10 without EDDY left mount 
# mesh_max: 315, 320  # 300, 325 without EDDY left mount
# probe_count: 10, 10
# mesh_pps: 2, 2
# # algorithm: lagrange
# algorithm: bicubic
# RESPOND MSG="printer.cfg [bed_mesh]"

[respond]   
## https://www.reddit.com/r/klippers/comments/y8rara/what_command_prints_text_to_the_console_id_like/
## https://www.klipper3d.org/G-Codes.html?h=respond#respond_1
default_type: echo
default_prefix: 

#####################################################################
#   MACROS
#####################################################################
[gcode_macro _CURA_SET_PRINT_STATS_INFO]
gcode:
  {% if params.LAYER_COUNT is defined %}
    SET_PRINT_STATS_INFO TOTAL_LAYER={params.LAYER_COUNT}
  {% endif %}
  {% if params.LAYER is defined %}
    SET_PRINT_STATS_INFO CURRENT_LAYER={(params.LAYER | int) + 1}
  {% endif %}

[gcode_macro RESPOND]
rename_existing: BASE_RESPOND
gcode:
  {% set colors = ('primary', 'secondary', 'accent', 'info', 'success', 'error', 'warning') %}

  {% if params.PREFIX is defined %}
    {% set prefix = 'PREFIX=' + params.PREFIX|string %}
  {% endif %}

  {% if params.TYPE is defined %}
      {% if params.TYPE in ('echo', 'echo_no_space', 'command', 'error') and params.TYPE != '' %}    
          {% set type = 'TYPE=' + params.TYPE|string %}
      {% else %}
          BASE_RESPOND TYPE=error MSG="RESPOND TYPE '{params.TYPE}' is invalid. Must be one of 'echo', 'command' or 'error'"
      {% endif %}
  {% endif %}
        
  {% if params.MSG is defined %}   
    {% set msg = 'MSG="'+ params.MSG + '"'|string %}
  {% endif %}

  {% if params.COLOR is defined %}
      {% set color = params.COLOR|lower %}

      {% if color in colors %}
          {% set msg = 'MSG="<span class=' + color + '--text>' + params.MSG + '</span>"'|string %}
  
      {% else %}
          BASE_RESPOND TYPE=error MSG="RESPOND COLOR '{color}' is invalid. Must be one of 'primary', 'secondary', 'accent', 'info', 'success', 'warning' or 'error'"
      {% endif %}
       
  {% endif %}
  BASE_RESPOND {prefix} {type} {msg}
  
#############################################################################
#   DYNAMIC MACROS
#   Send: DYNAMIC_MACRO after saving dynamic macro files, no need to restart
##  https://github.com/3DCoded/DynamicMacros
##  https://dynamicmacros.3dcoded.xyz/tutorial/
##  https://dynamicmacros.3dcoded.xyz/setup/
#############################################################################
[dynamicmacros]
configs: dynamic.cfg, eddy_macros.cfg  # You can add more files to this list, separated by commas.

 
#####################################################################
# 	Displays
#####################################################################

[virtual_sdcard]
path: ~/printer_data/gcodes
[display_status]

#####################################################################
##  various configs
#####################################################################

[pause_resume]

[gcode_arcs]
resolution: 0.1

[exclude_object]

[gcode_macro G29]
gcode:
    BED_MESH_CALIBRATE ADAPTATIV=1 ADAPTATIVE_MARGIN=5
    G90
    G0 Y20
    G0 X160 Y160
    

## 	Uncomment the display that you have
#--------------------------------------------------------------------

#[display]
##	RepRapDiscount 128x64 Full Graphic Smart Controller
#lcd_type: st7920
#cs_pin: EXP1_4
#sclk_pin: EXP1_5
#sid_pin: EXP1_3
#menu_timeout: 40
#encoder_pins: ^EXP2_5, ^EXP2_3
#click_pin: ^!EXP1_2

#[output_pin beeper]
#pin: EXP1_1

#--------------------------------------------------------------------

#[display]
##	mini12864 LCD Display
#lcd_type: uc1701
#cs_pin: EXP1_3
#a0_pin: EXP1_4
#rst_pin: EXP1_5
#encoder_pins: ^EXP2_5, ^EXP2_3
#click_pin: ^!EXP1_2
#contrast: 63
#spi_software_miso_pin: EXP2_1
#spi_software_mosi_pin: EXP2_6
#spi_software_sclk_pin: EXP2_2

#[neopixel btt_mini12864]
##	To control Neopixel RGB in mini12864 display
#pin: EXP1_6
#chain_count: 3
#initial_RED: 0.1
#initial_GREEN: 0.5
#initial_BLUE: 0.0
#color_order: RGB

##	Set RGB values on boot up for each Neopixel. 
##	Index 1 = display, Index 2 and 3 = Knob
#[delayed_gcode setdisplayneopixel]
#initia#l_duration: 1
#gcode:
#       SET_LED LED=btt_mini12864 RED=1 GREEN=1 BLUE=1 INDEX=1 TRANSMIT=0
#       SET_LED LED=btt_mini12864 RED=1 GREEN=0 BLUE=0 INDEX=2 TRANSMIT=0
#       SET_LED LED=btt_mini12864 RED=1 GREEN=0 BLUE=0 INDEX=3 
       

[input_shaper]
shaper_freq_x: 87.4     # center frequency for the X axis filter
shaper_type_x: 2hump_ei # filter type for the X axis
shaper_freq_y: 40.2     # center frequency for the Y axis filter
shaper_type_y: mzv      # filter type for the Y axis
damping_ratio_x: 0.088  # damping ratio for the X axis
damping_ratio_y: 0.057  # damping ratio for the Y axis

#--------------------------------------------------------------------

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [extruder]
#*# pid_kp = 27.444
#*# pid_ki = 2.951
#*# pid_kd = 63.806
#*# control = pid
#*#
#*# [probe]
#*# z_offset = -0.825
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 65.356
#*# pid_ki = 3.514
#*# pid_kd = 303.904
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  1.054110, 1.110643, 1.125322, 1.164851, 1.158842, 1.199680, 1.166805, 1.155288, 1.109958
#*# 	  1.031238, 1.067810, 1.072406, 1.130660, 1.122690, 1.144259, 1.131636, 1.120165, 1.063602
#*# 	  0.993208, 1.050988, 1.074016, 1.122690, 1.097453, 1.102937, 1.086905, 1.072773, 1.020893
#*# 	  0.975575, 1.031238, 1.036971, 1.089763, 1.072406, 1.095472, 1.069213, 1.058000, 0.988785
#*# 	  0.977331, 1.062202, 1.070841, 1.111110, 1.092815, 1.107628, 1.094473, 1.066727, 0.994160
#*# 	  1.016329, 1.084929, 1.086541, 1.125899, 1.114830, 1.130084, 1.110426, 1.091740, 1.024834
#*# 	  1.042578, 1.128821, 1.142415, 1.182874, 1.164484, 1.174405, 1.147757, 1.142415, 1.075626
#*# 	  1.074385, 1.139207, 1.153696, 1.206329, 1.196124, 1.209153, 1.193437, 1.188383, 1.115695
#*# 	  1.036208, 1.114830, 1.153336, 1.198218, 1.158842, 1.180781, 1.158842, 1.177593, 1.107853
#*# x_count = 9
#*# y_count = 9
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 70.0
#*# max_x = 340.0
#*# min_y = 5.0
#*# max_y = 285.0
#*#
#*# [probe_eddy_current btt_eddy]
#*# reg_drive_current = 15
#*# calibrate =
#*# 	0.050000:3210195.041,0.090000:3209563.628,0.130000:3209013.090,
#*# 	0.170000:3208375.411,0.210000:3207726.545,0.250000:3207048.325,
#*# 	0.290000:3206486.758,0.330000:3205874.359,0.370000:3205296.340,
#*# 	0.410000:3204660.695,0.450000:3204145.534,0.490000:3203576.744,
#*# 	0.530000:3203042.949,0.570000:3202443.609,0.610000:3201906.083,
#*# 	0.650000:3201368.945,0.690000:3200841.986,0.730000:3200361.188,
#*# 	0.770000:3199819.572,0.810000:3199298.788,0.850000:3198814.441,
#*# 	0.890000:3198312.183,0.930000:3197861.176,0.970000:3197381.569,
#*# 	1.010000:3196920.140,1.050000:3196459.708,1.090000:3196012.536,
#*# 	1.130000:3195580.576,1.170000:3195147.829,1.210000:3194705.808,
#*# 	1.250000:3194288.711,1.290000:3193872.120,1.330000:3193468.727,
#*# 	1.370000:3193044.421,1.410000:3192686.867,1.450000:3192268.359,
#*# 	1.490000:3191885.429,1.530000:3191496.436,1.570000:3191140.754,
#*# 	1.610000:3190747.072,1.650000:3190434.923,1.690000:3190048.442,
#*# 	1.730000:3189706.986,1.770000:3189352.071,1.810000:3189022.270,
#*# 	1.850000:3188677.620,1.890000:3188348.837,1.930000:3188032.966,
#*# 	1.970000:3187728.342,2.010000:3187410.270,2.050000:3187128.643,
#*# 	2.090000:3186776.960,2.130000:3186493.939,2.170000:3186214.011,
#*# 	2.210000:3185902.192,2.250000:3185620.489,2.290000:3185335.791,
#*# 	2.330000:3185055.971,2.370000:3184808.983,2.410000:3184537.616,
#*# 	2.450000:3184251.287,2.490000:3184010.837,2.530000:3183744.966,
#*# 	2.570000:3183499.126,2.610000:3183240.623,2.650000:3182989.658,
#*# 	2.690000:3182731.207,2.730000:3182504.496,2.770000:3182262.554,
#*# 	2.810000:3182057.984,2.850000:3181853.235,2.890000:3181594.817,
#*# 	2.930000:3181392.405,2.970000:3181159.749,3.010000:3180967.948,
#*# 	3.050000:3180740.202,3.090000:3180564.727,3.130000:3180322.226,
#*# 	3.170000:3180147.180,3.210000:3179926.283,3.250000:3179727.870,
#*# 	3.290000:3179539.226,3.330000:3179353.768,3.370000:3179174.180,
#*# 	3.410000:3178984.842,3.450000:3178798.886,3.490000:3178641.611,
#*# 	3.530000:3178445.967,3.570000:3178304.227,3.610000:3178106.176,
#*# 	3.650000:3177933.717,3.690000:3177807.244,3.730000:3177637.169,
#*# 	3.770000:3177470.368,3.810000:3177308.325,3.850000:3177186.942,
#*# 	3.890000:3177014.478,3.930000:3176863.296,3.970000:3176716.764,
#*# 	4.010000:3176566.410,4.050000:3176439.684
#*#
#*# [temperature_probe btt_eddy]
#*# calibration_temp = 37.290722
#*#
#*# [bed_mesh TEST_EDDY_1]
#*# version = 1
#*# points =
#*# 	0.760925, 0.793031, 0.802916, 0.848017, 0.876597, 0.888324, 0.866163, 0.842703, 0.795835
#*# 	0.724784, 0.739652, 0.725688, 0.768377, 0.801890, 0.828511, 0.811770, 0.791535, 0.748034
#*# 	0.686014, 0.734618, 0.733030, 0.760033, 0.776773, 0.798380, 0.758295, 0.732851, 0.679862
#*# 	0.649167, 0.686855, 0.662876, 0.707144, 0.752098, 0.788197, 0.729600, 0.707442, 0.645907
#*# 	0.661625, 0.750354, 0.715473, 0.747183, 0.768851, 0.792433, 0.747884, 0.716948, 0.653053
#*# 	0.683898, 0.735015, 0.706621, 0.742504, 0.768136, 0.787105, 0.760702, 0.741094, 0.686998
#*# 	0.712477, 0.802029, 0.774605, 0.806841, 0.827432, 0.832544, 0.806209, 0.777526, 0.731162
#*# 	0.744427, 0.801858, 0.778348, 0.816194, 0.856493, 0.878177, 0.850692, 0.830581, 0.786065
#*# 	0.767034, 0.849943, 0.842020, 0.869962, 0.889367, 0.891147, 0.874232, 0.874825, 0.807535
#*# x_count = 9
#*# y_count = 9
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 70.0
#*# max_x = 340.0
#*# min_y = 5.0
#*# max_y = 285.0
